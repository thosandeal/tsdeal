function spinText(text) {
    const icons = ['ðŸ','ðŸŽ','ðŸ','ðŸŠ','ðŸ‹','ðŸŒ','ðŸ‰','ðŸ‡','ðŸ“','ðŸˆ','ðŸ¥','ðŸ¥‘','ðŸ','ðŸ’','ðŸ‘','ðŸ†','ðŸ…','ðŸ ','ðŸŒ¼','ðŸŒ¸','ðŸŒº','ðŸµï¸','ðŸŒ»','ðŸŒ·','ðŸŒ¹','ðŸ¥€','ðŸ’','ðŸŒ¾','ðŸŽ‹','â˜˜','ðŸ€','ðŸƒ','ðŸ‚','ðŸ','ðŸŒ±','ðŸŒ¿','ðŸŽ','ðŸŒµ','ðŸŒ´','ðŸŒ³','ðŸŽ„','ðŸ„','ðŸ’«','â­','ðŸŒŸ','âœ¨','âš¡','ðŸ”¥','ðŸ’¥','â˜„ï¸','ðŸŒž','ðŸ­','ðŸ§','ðŸ¨','ðŸ¦','ðŸ¥ž','ðŸ°','ðŸŽ‚','ðŸ¬','ðŸ¿','ðŸ¥ƒ','ðŸ¹','â™¥ï¸','â¤ï¸','ðŸ’›','ðŸ’š','ðŸ’™','ðŸ‘','ðŸ‘Œï¸','ðŸŽ–ï¸ï¸','ðŸ…ï¸','ðŸ¥‡ï¸','ðŸ†','ðŸ’Ž','ðŸŽ²','ðŸ””','ðŸ“£','â™»ï¸','ðŸ’¯','â™¨ï¸','ðŸŒ€','âœ´ï¸','âœ³ï¸','âœ”ï¸','âœ…','ðŸ”´','ðŸ”µ','ðŸ’˜','ðŸ’Ÿ','ðŸ¤'];
    return text.replace(/\\r\\r/g, '\\n')
        .replace(/{([^{}]+?)}/g, (_, choices) => choices.split("|")[Math.floor(Math.random() * choices.split("|").length)])
        .replace(/\[r3\]/g, () => icons[Math.floor(Math.random() * icons.length)]);
}

function capitalizeFirstLetter(string) {
    return string.charAt(0).toUpperCase() + string.slice(1);
}

function reverseString(string) {
    return string.split('').reverse().join('');
}

function clickLink(page, selector) {
    return page.click(selector);
}

return {spinText, capitalizeFirstLetter, reverseString, clickLink};
